<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>

<body>    
    <section>
        <div id="regionsSpace">
            <table border="1" id="regTbl">
                <tr>                    
                </tr>
            </table>
        </div>
    </section>   
    <br/><br /><br />
        
   <!-- <button type ="button" onclick="fetchImgContainer()">show images</button>-->
    <!--this template is used to host regions -->
    <template id="regionsTemplate">
        <td>
            
        </td>         
    </template>

    <!--this template is used to host pictures -->
    <template id="picsTemplate">
        <img src="" alt="image">
        <div class="comment"></div>
    </template>
   
  

    <div id="imgContainer">
    </div>
    
    <script>
        //function that renders the table with choices. 
        (function renderRegionsTable() {

            if ('content' in document.createElement('template')) {

                var regionsArr = [
                    {
                        name: "North West",
                        abbr: "NW"                        
                    },
                    {
                        name: "North East",
                        abbr: "NE"
                    },
                    {
                        name: "Africa",
                        abbr: "AFR"
                    },
                    {
                        name: "East Asia",
                        abbr: "EA"
                    }
                ];

                var regCont = document.getElementById("regionsTemplate");
               // var td = regCont.querySelector('td');
                document.getElementById("regTbl").innerHTML = "";

                for (var k = 0; k < regionsArr.length; k++) {
                                      
                    regCont.innerHTML = '<td>' + '<div id="' + regionsArr[k].abbr + '"onclick="fetchImgContainer()">' + regionsArr[k].name + '</div' + '</td>';
                    //regCont.content.querySelector('div').innerHTML = regionsArr[k];

                    var clone = document.importNode(regCont.content, true);

                    document.getElementById('regTbl').appendChild(clone);
                }
            } else {

            }
        })();
        //function that renders container with images
        function fetchImgContainer() {
            var NW = ["smiley_face.jpg", "smiley_face.jpg", "smiley_face.jpg", "smiley_face.jpg"];
            var NE = ["profile.png", "profile.png", "profile.png", "profile.png"];
            var AFR = [];
            var EA = [];

            //populate the sources at run time
            if (event.target.id === "NW") {
                mapImagesToRegion(NW);
            }
            else if (event.target.id === "NE") {
                mapImagesToRegion(NE);
            }
            else if (event.target.id === "AFR") {
                mapImagesToRegion(AFR);
            }
            else if (event.target.id === "EA") {
                mapImagesToRegion(EA);
            }
        }

        //this function maps regions of where the images were taken to the server image location
        function mapImagesToRegion(regionA) {
            if ('content' in document.createElement('template')) {
                var imgC = document.getElementById("picsTemplate");

                //cleanup previous template contents           
                document.getElementById("imgContainer").innerHTML = "";
                for (var i = 0; i < regionA.length; i++) {

                    imgC.content.querySelector('img').src = "img/" + regionA[i];

                    //create a deep copy of the template contents
                    var clone = document.importNode(imgC.content, true);
                    //append newly created markup to DOM
                    //document.body.appendChild(clone);
                    document.getElementById("imgContainer").appendChild(clone);
                }
            } else {

            }                        
        }

    </script>
</body>

</html>